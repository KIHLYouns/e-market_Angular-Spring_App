<div class="conversation-list">
  <div class="header">
    <h2>Messages</h2>
  </div>
  
  <div class="conversations">
    @for (conversation of conversations; track conversation.id) {
      <a 
        [routerLink]="['/messages', conversation.id]"
        routerLinkActive="active"
        class="conversation-item"
      >
        <img 
          [src]="getOtherParticipant(conversation).avatar" 
          [alt]="getOtherParticipant(conversation).username" 
          class="avatar"
        >
        <div class="conversation-info">
          <div class="top-line">
            <span class="username">{{ getOtherParticipant(conversation).username }}</span>
            <span class="time">{{ conversation.updatedAt | date:'shortTime' }}</span>
          </div>
          <div class="bottom-line">
            <span class="last-message">{{ conversation.lastMessage?.content }}</span>
            @if (conversation.unreadCount > 0) {
              <span class="unread-count">{{ conversation.unreadCount }}</span>
            }
          </div>
        </div>
      </a>
    }
  </div>
</div>
